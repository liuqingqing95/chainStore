{
    "version": 3,
    "sources": [
        "..\\..\\..\\src\\api\\controller\\index.js"
    ],
    "names": [
        "Base",
        "require",
        "moment",
        "Jushuitan",
        "rp",
        "http",
        "module",
        "exports",
        "indexAction",
        "appInfoAction",
        "banner",
        "model",
        "where",
        "enabled",
        "is_delete",
        "field",
        "order",
        "select",
        "notice",
        "channel",
        "is_channel",
        "parent_id",
        "sort_order",
        "categoryList",
        "is_show",
        "categoryItem",
        "categoryGoods",
        "category_id",
        "id",
        "goods_number",
        "is_on_sale",
        "is_index",
        "goodsList",
        "userId",
        "getLoginUserId",
        "cartCount",
        "user_id",
        "sum",
        "data",
        "success"
    ],
    "mappings": ";;AAAA,MAAMA,OAAOC,QAAQ,WAAR,CAAb;AACA;AACA,MAAMC,SAASD,QAAQ,QAAR,CAAf;AACA,MAAME,YAAYF,QAAQ,WAAR,CAAlB;AACA,MAAMG,KAAKH,QAAQ,iBAAR,CAAX;AACA,MAAMI,OAAOJ,QAAQ,MAAR,CAAb;AACAK,OAAOC,OAAP,GAAiB,cAAcP,IAAd,CAAmB;AAC1BQ,eAAN,GAAoB;AAChB;AACA;;AAFgB;AAGnB;AACKC,iBAAN,GAAsB;AAAA;;AAAA;AAClB,kBAAMC,SAAS,MAAM,MAAKC,KAAL,CAAW,IAAX,EAAiBC,KAAjB,CAAuB;AACxCC,yBAAS,CAD+B;AAExCC,2BAAW;AAF6B,aAAvB,EAGlBC,KAHkB,CAGZ,mCAHY,EAGyBC,KAHzB,CAG+B,gBAH/B,EAGiDC,MAHjD,EAArB;AAIA,kBAAMC,SAAS,MAAM,MAAKP,KAAL,CAAW,QAAX,EAAqBC,KAArB,CAA2B;AAC5CE,2BAAW;AADiC,aAA3B,EAElBC,KAFkB,CAEZ,SAFY,EAEDE,MAFC,EAArB;AAGA,kBAAME,UAAU,MAAM,MAAKR,KAAL,CAAW,UAAX,EAAuBC,KAAvB,CAA6B;AAC/CQ,4BAAY,CADmC;AAE/CC,2BAAW;AAFoC,aAA7B,EAGnBN,KAHmB,CAGb,6BAHa,EAGkBC,KAHlB,CAGwB;AAC1CM,4BAAY;AAD8B,aAHxB,EAKnBL,MALmB,EAAtB;AAMA,kBAAMM,eAAe,MAAM,MAAKZ,KAAL,CAAW,UAAX,EAAuBC,KAAvB,CAA6B;AACpDS,2BAAW,CADyC;AAEpDG,yBAAS;AAF2C,aAA7B,EAGxBT,KAHwB,CAGlB,+CAHkB,EAG+BC,KAH/B,CAGqC;AAC5DM,4BAAY;AADgD,aAHrC,EAKxBL,MALwB,EAA3B;AAMN,iBAAK,MAAMQ,YAAX,IAA2BF,YAA3B,EAAyC;AACxC,sBAAMG,gBAAgB,MAAM,MAAKf,KAAL,CAAW,OAAX,EAAoBC,KAApB,CAA0B;AACrDe,iCAAaF,aAAaG,EAD2B;AAErDC,kCAAc,CAAC,IAAD,EAAO,CAAP,CAFuC;AAGrDC,gCAAY,CAHyC;AAIrDC,8BAAU,CAJ2C;AAKrDjB,+BAAW;AAL0C,iBAA1B,EAMzBC,KANyB,CAMnB,2DANmB,EAM0CC,KAN1C,CAMgD;AAC3EM,gCAAY;AAD+D,iBANhD,EAQzBL,MARyB,EAA5B;AASAQ,6BAAaO,SAAb,GAAyBN,aAAzB;AACA;AACD,kBAAMO,SAAS,MAAKC,cAAL,EAAf;AACA,gBAAIC,YAAY,MAAM,MAAKxB,KAAL,CAAW,MAAX,EAAmBC,KAAnB,CAAyB;AAC9CwB,yBAASH,MADqC;AAE9CnB,2BAAW;AAFmC,aAAzB,EAGnBuB,GAHmB,CAGf,QAHe,CAAtB;AAIA,gBAAGF,aAAa,IAAhB,EAAqB;AACpBA,4BAAY,CAAZ;AACA;AACD,gBAAIG,OAAO;AACVnB,yBAASA,OADC;AAEVT,wBAAQA,MAFE;AAGVQ,wBAAQA,MAHE;AAIVK,8BAAcA,YAJJ;AAKVY,2BAAWA;AALD,aAAX;AAOM,mBAAO,MAAKI,OAAL,CAAaD,IAAb,CAAP;AA/CkB;AAgDrB;AArD+B,CAApC",
    "file": "..\\..\\..\\src\\api\\controller\\index.js",
    "sourcesContent": [
        "const Base = require('./base.js');\r\n// const view = require('think-view');\r\nconst moment = require('moment');\r\nconst Jushuitan = require('jushuitan');\r\nconst rp = require('request-promise');\r\nconst http = require(\"http\");\r\nmodule.exports = class extends Base {\r\n    async indexAction() {\r\n        //auto render template file index_index.html\r\n        // return this.display();\r\n    }\r\n    async appInfoAction() {\r\n        const banner = await this.model('ad').where({\r\n            enabled: 1,\r\n            is_delete: 0\r\n        }).field('link_type,goods_id,image_url,link').order('sort_order asc').select();\r\n        const notice = await this.model('notice').where({\r\n            is_delete: 0\r\n        }).field('content').select();\r\n        const channel = await this.model('category').where({\r\n            is_channel: 1,\r\n            parent_id: 0,\r\n        }).field('id,icon_url,name,sort_order').order({\r\n            sort_order: 'asc'\r\n        }).select();\r\n        const categoryList = await this.model('category').where({\r\n            parent_id: 0,\r\n            is_show: 1\r\n        }).field('id,name,img_url as banner, p_height as height').order({\r\n            sort_order: 'asc'\r\n        }).select();\r\n\t\tfor (const categoryItem of categoryList) {\r\n\t\t\tconst categoryGoods = await this.model('goods').where({\r\n\t\t\t\tcategory_id: categoryItem.id,\r\n\t\t\t\tgoods_number: ['>=', 0],\r\n\t\t\t\tis_on_sale: 1,\r\n\t\t\t\tis_index: 1,\r\n\t\t\t\tis_delete: 0\r\n\t\t\t}).field('id,list_pic_url,is_new,goods_number,name,min_retail_price').order({\r\n\t\t\t\tsort_order: 'asc'\r\n\t\t\t}).select();\r\n\t\t\tcategoryItem.goodsList = categoryGoods;\r\n\t\t}\r\n\t\tconst userId = this.getLoginUserId();\r\n\t\tlet cartCount = await this.model('cart').where({\r\n\t\t\tuser_id: userId,\r\n\t\t\tis_delete: 0\r\n\t\t}).sum('number');\r\n\t\tif(cartCount == null){\r\n\t\t\tcartCount = 0;\r\n\t\t}\r\n\t\tlet data = {\r\n\t\t\tchannel: channel,\r\n\t\t\tbanner: banner,\r\n\t\t\tnotice: notice,\r\n\t\t\tcategoryList: categoryList,\r\n\t\t\tcartCount: cartCount,\r\n\t\t}\r\n        return this.success(data);\r\n    }\r\n};"
    ]
}